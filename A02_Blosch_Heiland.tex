\documentclass[12pt]{article}

\newcommand{\arrowright}{$\longrightarrow$ }

\input{usepackage.tex}
 \begin{document}
 	\includepdf[pages=-]{deckblatt.pdf}
 	
 	\input{formatAndHeader.tex}
 	
 	\section*{Aufgabe 2.1}
 	%Quelle(https://andydunkel.net/assets/wp-custom/docs/datenbanken.pdf)
 	
 	
 	%a)
 	%Geben Sie zunächst die Relationen mit ihren Attributen in folgender Notation an: 
 	
 	%Relation ( Attribut1, Attribut2, …, Attributn) 
 	%Verwenden Sie Namen von Relationen und Attributen, die möglichst nahe an den Vorgaben im ER-Diagramm sind. Erzeugen Sie keine überflüssigen Relationen oder Attribute! Markieren Sie die Primärschlüssel der Relationen durch Unterstreichung. Verwenden Sie zur Umsetzung der is-a-Beziehung das Hausklassenmodell. 
 	\paragraph*{a.}
 		%%%%%%%%%%%%%%%%%
 		%%% Relations %%%
 		%%%%%%%%%%%%%%%%%
 		\textbf{Relationships:}\\
 		
	 	Bahnhof (\underline{Ort}, \underline{Haltestelle},Kategorie)\\[1.3em]
	 	
	 	Fahrkarte (\underline{FahrkartenNr}, Reisedatum, Startzeit, Pl"atze)\\[1.3em]
	 	
	 	Linie (\underline{Bezeichnung}, Betreiber)\\[1.3em]
	 	
	 	Zug (\underline{ZugNr}, Eigentümer)\\[1.3em]
	 	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	 	% wie gehe ich mit der Ausstattung um??? %
	 	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	 	Wagen (\underline{WagenNr, ZugNr}, Ausstattung)\\[1.3em]
	 	
	 	Person (\underline{Name}, \underline{Geburtsdatum}, Adresse) \\[1.2em]
	 	
	 	Bahnkundin (\underline{Name}, \underline{Geburtsdatum}, Adresse, KundenNr)\\[1.2em]
	 	
	 	Mitarbeiter (\underline{Name}, \underline{Geburtsdatum},  Adresse, Gehalt)\\[1.2em]
	 	
	 	Ausstattung(\underline{WagenNr, ZugNr})\\[1.2em]
	 	
	 	f"ahrt an (täglich, \underline{Ort, Haltestelle, Bezeichnung})\\[1.2em]
	 	
	 	eingesetzt (\underline{ZugNr}, Linie)\\[1.2em]
	 	
	 	geh"ort zu (\underline{ZugNr, WagenNr})\\[1.2em]
	 	
	 	von (\underline{Fahrkarte},Ort, Haltestelle)\\[1.2em]
	 	
	 	nach (\underline{Fahrkarte},Ort, Haltestelle)\\[1.2em]
	 	
	 	f"ur (\underline{Fahrkarte}, Linie)\\[1.2em]
	 	
	 	Kauf f"ur(\underline{FahrkartenNr}, Name, Geburtsdatum, Kaufdatum)\\[2 em]	 	
	 	
	 	
 	%b)
 	%Geben Sie alle Fremdschlüsselattribute an und benennen Sie die Relationen und Attribute, auf die diese jeweils verweisen in der folgenden Notation: 
 	
 	%Relation1(Attribut1) -> Relation2(Attribut2) 	
 	\paragraph*{b.}	
 	
 		%%%%%%%%%%%%%%%%%%%%
 	%%% Foreign Keys %%%
 	%%%%%%%%%%%%%%%%%%%%
 	\textbf{Foreign Keys:}\\
 	
 	Wagen(ZugNr) \arrowright Zug(ZugNr); Mitarbeiter(Name, Geb.datum) \arrowright Person(Name, Geb.datum);\\[1.1em]
 	
 	Ausstattung(WagenNr) \arrowright Wagen(WagenNr); Ausstattung(ZugNr) \arrowright Zug(ZugNr);\\[1.1em]
 	
 	f"ahrt an(Ort, Haltestelle) \arrowright Bahnhof(Ort, Haltestelle);  f"ahrt an(Bezeichng) \arrowright Linie(Bezeichng);\\[1.1em]
 	
 	eingesetzt(Linie) \arrowright Linie(Bezeichnung); f"ur(Linie) \arrowright Linie(Bezeichnung);\\[1.1em]
 	
 	geh"ort zu(ZugNr) \arrowright Zug(ZugNr); geh"ort zu(WagenNr) \arrowright Wagen(WagenNr);\\[1.1em]
 	
 	von(Fahrkarte) \arrowright Fahrkarte(FahrkartenNr); von(Ort,Haltest.) \arrowright Bahnhof(Ort, Haltest.);\\[1.1em]
 	
 	nach(Fahrkarte) \arrowright Fahrkarte(FahrkartenNr); nach(Ort,Haltestelle) \arrowright Bahnhof(Ort, Haltestelle);\\[1.1em]
 	
 	f"ur(Fahrkarte) \arrowright Fahrkarte(FahrkartenNr); f"ur(Linie) \arrowright Linie(Bezeichnung);\\[1.1em]
 	
 	Kauf f"ur(FahrkartenNr) \arrowright Fahrkarte(FahrkartenNr); Kauf f"ur(Name, Geburtsdatum)\\ \arrowright Person(Name, Geburtsdatum);\\[1.1em]
 	
 	%c)
 	% Geben Sie für die Umsetzung der is-a-Beziehung eine Lösung im Partitionierungsmodell an. Geben Sie alle Relationen an, die im Zusammenhang mit der is-a-Beziehung erforderlich sind. Erläutern Sie, wie sich die zugehörigen Relationen und deren Attribute im Vergleich zum Hausklassenmodell ändern? 
 	\paragraph*{c.}
 	Person (\underline{Name}, \underline{Geburtsdatum}, Adresse) \\[1,3em]
 	
 	Bahnkundin (\underline{Name}, \underline{Geburtsdatum}, KundenNr) \\[1,3em]
 	
 	Mitarbeiter (\underline{Name}, \underline{Geburtsdatum}, Gehalt) \\[1,3em]
 	Nur neu hinzukommende Attribute und Primärschlüssel werden mit in die Relation aufgenommen.
 		
 	\section*{Aufgabe 2.2}
 	
 	\paragraph*{a)}
 	$\pi_{Name, Sitz}(\sigma_{TeilNr=25}(Lieferung \overset{LieferantenNr = LieferantenNr}{\bowtie} Lieferant))$
 	
 	\paragraph*{b)}
 	$\pi_{Name}(\sigma_{(TeilNr=15) - (TeilNr != 15)}(Lagerbestand \overset{Lager = Ort}{\bowtie} Lager))$
 	
 	
 	\paragraph*{c)}
 	$\pi_{Name}(\sigma_{(Lieferdatum = 01.01.2018) \wedge (Menge > 500)}Lieferung \overset{LieferantenNr = LieferantenNr}{\bowtie} Lieferant)$
 	
 	
 	\paragraph*{d)}
 	$\pi_{Bezeichnung}(\large(\sigma_{Bezeichnung=Schraube}(Teil) \overset{TeilNr = Bestandteil}{\bowtie} St"uckliste\large) \overset{Komponente = TeilNr}{\bowtie} Teil)$
 	
 	\paragraph*{e)}
 	$\pi_{Name}( \sigma_{Sitz = Stuttgart}((Lagerbestand \overset{Lager = Ort}{\bowtie} Lager) \overset{TeilNr = TeilNr}{\bowtie} Lieferung)\\ \overset{LieferantenNr = LieferantenNr}{\bowtie} \rho_{LNummer,LName,Sitz}(Lieferant))$
 \end{document}